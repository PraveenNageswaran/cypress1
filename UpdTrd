import org.apache.jmeter.protocol.http.control.AuthManager;
import org.apache.jmeter.protocol.http.control.Authorization;
import org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy;
import org.apache.jmeter.protocol.http.util.HTTPFileArg;
import org.apache.jmeter.protocol.http.util.HTTPFileArgs;
import org.apache.jorphan.util.JOrphanUtils;
import org.apache.jmeter.threads.JMeterContext;
import org.apache.jmeter.threads.JMeterContextService;
import org.apache.jorphan.io.TextFile;

String confluenceUrl = "https://your-confluence-url/rest/api/content/{id}/child/attachment";
String pageId = "your-page-id";
String attachmentFilePath = "path/to/your/attachment/file.txt";

HTTPSamplerProxy httpSampler = new HTTPSamplerProxy();
httpSampler.setDomain(confluenceUrl);
httpSampler.setPath(confluenceUrl.replace("{id}", pageId));
httpSampler.setMethod("POST");

JMeterContext context = JMeterContextService.getContext();
AuthManager authManager = context.getEngine().getAuthorizationManager();

String username = "your-username";
String password = "your-password";

authManager.addAuth(myHTTPSampler, new Authorization(){
    @Override
    public String getURL() {
        return httpSampler.getDomain();
    }

    @Override
    public String getURLContents(String url, String method, String user, String password){
        return url;
    }

    @Override
    public boolean getUsePreemptive() {
        return true;
    }

    @Override
    public void setPreemptive(boolean value) {

    }

    @Override
    public String getAuthHeaderForURL(String url, String method, String content, String user, String password) {
        return null;
    }
});

httpSampler.setArguments(new HTTPFileArgs(new HTTPFileArg(attachmentFilePath, "file", "application/octet-stream")));

httpSampler.setProperty(TestElement.TEST_CLASS, HTTPSamplerProxy.class.getName());
httpSampler.setProperty(TestElement.GUI_CLASS, HttpTestSampleGui.class.getName());
httpSampler.setProperty(TestElement.NAME, "HTTP Request");
httpSampler.setProperty(TestElement.ENABLED, true);
httpSampler.setProperty(TestElement.TEST_CLASS, HTTPSamplerProxy.class.getName());
httpSampler.setProperty(TestElement.GUI_CLASS, HttpTestSampleGui.class.getName());

httpSampler.setPostBodyRaw(true);
httpSampler.setDoMultipartPost(true);

httpSampler.setImplementation("HttpClient4");

httpSampler.execute();
```
